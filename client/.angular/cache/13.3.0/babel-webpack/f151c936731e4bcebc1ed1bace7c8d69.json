{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/usuarios.service\";\nimport * as i2 from \"src/app/services/loginservices.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"angular-ng-autocomplete\";\nimport * as i5 from \"@angular/common\";\nconst _c0 = [\"inputUsuario\"];\n\nfunction UsuariosComponent_ng_template_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\");\n    i0.ɵɵelement(1, \"span\", 41);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r6 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"innerHTML\", item_r6.nombre, i0.ɵɵsanitizeHtml);\n  }\n}\n\nfunction UsuariosComponent_ng_template_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 41);\n  }\n\n  if (rf & 2) {\n    const notFound_r7 = ctx.$implicit;\n    i0.ɵɵproperty(\"innerHTML\", notFound_r7, i0.ɵɵsanitizeHtml);\n  }\n}\n\nfunction UsuariosComponent_option_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 42);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const usuario_r8 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", usuario_r8.idtipousuario);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(usuario_r8.tipousuario);\n  }\n}\n\nexport let UsuariosComponent = /*#__PURE__*/(() => {\n  class UsuariosComponent {\n    constructor(usuariosService, loginServicesService) {\n      this.usuariosService = usuariosService;\n      this.loginServicesService = loginServicesService; ///////////////////////////////////AUTOCOMPLETES///////////////////////////////////\n\n      this.keywordUsuarios = 'nombre';\n      this.usuarios = [];\n      this.placeholderUsuario = 'Busca un empleado...';\n      this.inputsDisabled = false; ///////////////////////////////////AUTOCOMPLETES///////////////////////////////////\n\n      this.usuario = {\n        user: null,\n        pass: null,\n        empleados_idempleado: null,\n        tipo_usuario: null\n      };\n      this.tiposUsuario = [];\n    }\n\n    ngOnInit() {\n      this.getUsuarios();\n      this.getTiposUsuario();\n    }\n\n    getTiposUsuario() {\n      this.usuariosService.getTiposUsuarios().subscribe(tiposUsuarios => {\n        this.tiposUsuario = tiposUsuarios;\n      }, err => console.error(err));\n    }\n\n    getUsuarios() {\n      this.usuariosService.getUsuarios().subscribe(res => {\n        this.usuarios = res;\n      }, err => console.error(err));\n    }\n\n    registrarUsuario() {\n      if (!this.usuario.user || !this.usuario.pass || !this.usuario.empleados_idempleado || !this.usuario.tipo_usuario) {\n        $('#motivoErrorHeader').html('Faltan datos');\n        $('#motivoErrorContent').html(`<i class='fas fa-exclamation-triangle mr-2'></i>Se deben\n      llenar todos los campos para registrar un usuario.`);\n        $('#errorUsuarioModal').modal('show');\n      } else {\n        this.loginServicesService.setUser(this.usuario).subscribe(res => {\n          this.responseSetUser = res;\n\n          if (this.responseSetUser) {\n            this.inputUsuario.clear();\n            this.usuario.user = null;\n            this.usuario.pass = null;\n            this.usuario.empleados_idempleado = null;\n            this.usuario.tipo_usuario = null;\n            $('#nuevoUsuarioModal').modal('show');\n          } else {\n            $('#motivoErrorHeader').html('Usuario duplicado');\n            $('#motivoErrorContent').html(`<i class='fas fa-exclamation-triangle mr-2'></i>El nombre de usuario ingresado, ya existe.`);\n            $('#errorUsuarioModal').modal('show');\n          }\n        }, err => console.error(err));\n      }\n    } ///////////////////////////////////AUTOCOMPLETES///////////////////////////////////\n\n\n    selectEventUsuario(item) {\n      this.usuario.empleados_idempleado = item.idempleado;\n    }\n\n    onChangeSearch(val) {// fetch remote data from here\n      // And reassign the 'data' which is binded to 'data' property.\n    }\n\n    onCleared(e) {\n      this.inputUsuario.close();\n    }\n\n    onFocusedUsuario(e) {\n      // do something when input is focused\n      this.inputUsuario.open();\n    }\n\n  }\n\n  UsuariosComponent.ɵfac = function UsuariosComponent_Factory(t) {\n    return new (t || UsuariosComponent)(i0.ɵɵdirectiveInject(i1.UsuariosService), i0.ɵɵdirectiveInject(i2.LoginservicesService));\n  };\n\n  UsuariosComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: UsuariosComponent,\n    selectors: [[\"app-usuarios\"]],\n    viewQuery: function UsuariosComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.inputUsuario = _t.first);\n      }\n    },\n    decls: 73,\n    vars: 10,\n    consts: [[1, \"row\"], [1, \"col-md-12\"], [1, \"card\", \"mb-3\"], [1, \"card-header\", \"text-white\", \"cardheader\"], [1, \"card-body\"], [1, \"card-title\"], [1, \"row\", \"d-flex\", \"justify-content-around\"], [1, \"col-md-4\", \"col-sm-12\", \"mt-3\"], [\"for\", \"userInput\"], [\"type\", \"text\", \"name\", \"userInput\", \"id\", \"userInput\", \"placeholder\", \"Escriba un nombre de usuario\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"passInput\"], [\"type\", \"password\", \"name\", \"passInput\", \"id\", \"passInput\", \"placeholder\", \"Ingrese una contrase\\u00F1a\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"id\", \"inputEmpleado\", 1, \"ng-autocomplete\"], [\"name\", \"usuarios\", 3, \"data\", \"disabled\", \"searchKeyword\", \"placeholder\", \"itemTemplate\", \"notFoundTemplate\", \"selected\", \"inputChanged\", \"inputCleared\", \"inputFocused\"], [\"inputUsuario\", \"\"], [\"itemTemplateUsuario\", \"\"], [\"notFoundTemplate\", \"\"], [\"for\", \"servicio\"], [\"id\", \"tipoUsuario\", \"name\", \"tipoUsuario\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"value\", \"null\", \"disabled\", \"\", \"selected\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"row\", \"d-flex\", \"justify-content-center\"], [1, \"col-md-3\", \"col-sm-6\", \"mt-3\", \"mb-3\"], [1, \"mt-4\", \"form-control\", \"btn\", \"btn-success\", 3, \"click\"], [1, \"far\", \"fa-save\", \"ml-2\"], [\"id\", \"nuevoUsuarioModal\", \"tabindex\", \"-1\", \"aria-labelledby\", \"nuevoUsuarioModalLabel\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [1, \"modal-dialog\", \"modal-md\"], [1, \"modal-content\"], [1, \"modal-header\", \"bg-dark\", \"text-light\"], [1, \"modal-title\"], [1, \"modal-body\"], [1, \"container\"], [1, \"col-12\"], [\"role\", \"alert\", 1, \"alert\", \"alert-success\"], [1, \"fas\", \"fa-check-circle\", \"mr-2\"], [1, \"modal-footer\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", 1, \"btn\", \"btn-primary\"], [\"id\", \"errorUsuarioModal\", \"tabindex\", \"-1\", \"aria-labelledby\", \"errorUsuarioModal\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [\"id\", \"motivoErrorHeader\", 1, \"modal-title\"], [\"role\", \"alert\", 1, \"alert\", \"alert-warning\"], [\"id\", \"motivoErrorContent\"], [3, \"innerHTML\"], [3, \"value\"]],\n    template: function UsuariosComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3);\n        i0.ɵɵtext(4, \"REGISTRO DE USUARIOS\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 4)(6, \"h5\", 5);\n        i0.ɵɵtext(7, \"Registrar usuario\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(8, \"hr\");\n        i0.ɵɵelementStart(9, \"div\", 6)(10, \"div\", 7)(11, \"label\", 8);\n        i0.ɵɵtext(12, \"Usuario\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"input\", 9);\n        i0.ɵɵlistener(\"ngModelChange\", function UsuariosComponent_Template_input_ngModelChange_13_listener($event) {\n          return ctx.usuario.user = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(14, \"div\", 7)(15, \"label\", 10);\n        i0.ɵɵtext(16, \"Contrase\\u00F1a\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"input\", 11);\n        i0.ɵɵlistener(\"ngModelChange\", function UsuariosComponent_Template_input_ngModelChange_17_listener($event) {\n          return ctx.usuario.pass = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(18, \"div\", 6)(19, \"div\", 7)(20, \"label\");\n        i0.ɵɵtext(21, \"Empleado\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"div\", 12)(23, \"ng-autocomplete\", 13, 14);\n        i0.ɵɵlistener(\"selected\", function UsuariosComponent_Template_ng_autocomplete_selected_23_listener($event) {\n          return ctx.selectEventUsuario($event);\n        })(\"inputChanged\", function UsuariosComponent_Template_ng_autocomplete_inputChanged_23_listener($event) {\n          return ctx.onChangeSearch($event);\n        })(\"inputCleared\", function UsuariosComponent_Template_ng_autocomplete_inputCleared_23_listener($event) {\n          return ctx.onCleared($event);\n        })(\"inputFocused\", function UsuariosComponent_Template_ng_autocomplete_inputFocused_23_listener($event) {\n          return ctx.onFocusedUsuario($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(25, UsuariosComponent_ng_template_25_Template, 2, 1, \"ng-template\", null, 15, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵtemplate(27, UsuariosComponent_ng_template_27_Template, 1, 1, \"ng-template\", null, 16, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(29, \"div\", 7)(30, \"label\", 17);\n        i0.ɵɵtext(31, \"Tipo de usuario\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"select\", 18);\n        i0.ɵɵlistener(\"ngModelChange\", function UsuariosComponent_Template_select_ngModelChange_32_listener($event) {\n          return ctx.usuario.tipo_usuario = $event;\n        });\n        i0.ɵɵelementStart(33, \"option\", 19);\n        i0.ɵɵtext(34, \"Selecciona un tipo de usuario...\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(35, UsuariosComponent_option_35_Template, 2, 2, \"option\", 20);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(36, \"div\", 21)(37, \"div\", 22)(38, \"button\", 23);\n        i0.ɵɵlistener(\"click\", function UsuariosComponent_Template_button_click_38_listener() {\n          return ctx.registrarUsuario();\n        });\n        i0.ɵɵtext(39, \"Registrar usuario\");\n        i0.ɵɵelement(40, \"i\", 24);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(41, \"hr\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(42, \"div\", 25)(43, \"div\", 26)(44, \"div\", 27)(45, \"div\", 28)(46, \"h5\", 29);\n        i0.ɵɵtext(47, \"Usuario registrado\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(48, \"div\", 30)(49, \"div\", 31)(50, \"div\", 0)(51, \"div\", 32)(52, \"div\", 33)(53, \"p\");\n        i0.ɵɵelement(54, \"i\", 34);\n        i0.ɵɵtext(55, \"\\u00A1El usuario fue registrado exitosamente!\");\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵelementStart(56, \"div\", 35)(57, \"button\", 36);\n        i0.ɵɵtext(58, \"Continuar\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(59, \"div\", 37)(60, \"div\", 26)(61, \"div\", 27)(62, \"div\", 28);\n        i0.ɵɵelement(63, \"h5\", 38);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(64, \"div\", 30)(65, \"div\", 31)(66, \"div\", 0)(67, \"div\", 32)(68, \"div\", 39);\n        i0.ɵɵelement(69, \"p\", 40);\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(70, \"div\", 35)(71, \"button\", 36);\n        i0.ɵɵtext(72, \"Continuar\");\n        i0.ɵɵelementEnd()()()()();\n      }\n\n      if (rf & 2) {\n        const _r1 = i0.ɵɵreference(26);\n\n        const _r3 = i0.ɵɵreference(28);\n\n        i0.ɵɵadvance(13);\n        i0.ɵɵproperty(\"ngModel\", ctx.usuario.user);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.usuario.pass);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"data\", ctx.usuarios)(\"disabled\", ctx.inputsDisabled)(\"searchKeyword\", ctx.keywordUsuarios)(\"placeholder\", ctx.placeholderUsuario)(\"itemTemplate\", _r1)(\"notFoundTemplate\", _r3);\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngModel\", ctx.usuario.tipo_usuario);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.tiposUsuario);\n      }\n    },\n    directives: [i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel, i4.AutocompleteComponent, i3.SelectControlValueAccessor, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i5.NgForOf],\n    styles: [\"input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}img[_ngcontent-%COMP%]{min-width:50%}h1[_ngcontent-%COMP%]{color:#00bfff;font-weight:500;font-style:oblique;text-align:center}#contenedor[_ngcontent-%COMP%]{margin-top:10%}div.alert-primary[_ngcontent-%COMP%]{text-align:center;font-size:x-large;font-style:Bold;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif}.ng-autocomplete[_ngcontent-%COMP%]{max-width:100%!important}.ng-autocomplete[_ngcontent-%COMP%]     .autocomplete-container{box-shadow:none!important;border:solid!important;border-width:thin!important;border-color:#d3d3d3!important;min-width:100%!important}.cardheader[_ngcontent-%COMP%]{background-color:#d13138;text-align:center}.folioregistro[_ngcontent-%COMP%]{font-weight:bolder;font-size:x-large}#octagon[_ngcontent-%COMP%]{cursor:pointer;width:120px;height:120px;background:#28a745;position:relative}#octagon[_ngcontent-%COMP%]:before{content:\\\"\\\";width:120px;height:0;position:absolute;top:0;left:0;border-bottom:32px solid #28a745;border-left:32px solid rgb(255,254,254);border-right:32px solid rgb(255,255,255)}#octagon[_ngcontent-%COMP%]:after{content:\\\"\\\";width:120px;height:0;position:absolute;bottom:0;left:0;border-top:32px solid #28a745;border-left:32px solid rgb(255,252,252);border-right:32px solid rgb(255,255,255)}.textoctagon[_ngcontent-%COMP%]{font-size:95%;font-weight:bolder;margin-top:26%;color:#fff;text-align:center}p[_ngcontent-%COMP%]{margin-bottom:auto}p[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], label[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}\"]\n  });\n  return UsuariosComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}