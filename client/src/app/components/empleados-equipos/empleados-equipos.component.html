<div class="row">
  <div class="col-md-12">
    <div class="card mb-3">
      <div class="card-header text-white cardheader">REGISTRO DE COLABORADORES Y EQUIPOS</div>
      <div class="card-body">
        <div class="accordion" id="accordionPanelsStayOpenExample">
          <!---------------------------------APARTADO DE REGISTRO DE COLABORADORES--------------------------------->
          <div class="accordion-item">
            <h2 class="accordion-header" id="panelsStayOpen-headingOne">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="false" aria-controls="panelsStayOpen-collapseOne">
                Registro de colaboradores
              </button>
            </h2>
            <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingOne">
              <div class="accordion-body">
                <div class="row d-flex justify-content-between">
                  <div class="col-md-4 mt-3">
                    <label for="nombresInput">Nombre(s)</label>
                    <input [disabled]="loading" [(ngModel)]="colaborador.nombres" (keyup)="checkForm()" type="text" name="nombres" id="nombresInput" class="form-control" placeholder="Escriba el nombre(s) del colaborador">
                    <div class="invalid-feedback">
                      Por favor, ingrese un nombre.
                    </div>
                  </div>
                  <div class="col-md-4 mt-3">
                    <label for="apellidoPat">Apellido paterno</label>
                    <input [disabled]="loading" [(ngModel)]="colaborador.apellido_paterno" (keyup)="checkForm()" type="text" name="apellidoPaterno" id="apellidoPat" class="form-control" placeholder="Escriba el apellido paterno del colaborador">
                    <div class="invalid-feedback">
                      Por favor, ingrese el apellido paterno.
                    </div>
                  </div>
                  <div class="col-md-4 mt-3">
                    <label for="apellidoMat">Apellido materno</label>
                    <input [disabled]="loading" [(ngModel)]="colaborador.apellido_materno" (keyup)="checkForm()" type="text" name="apellidoMaterno" id="apellidoMat" class="form-control" placeholder="Escriba el apellido materno del colaborador">
                    <div class="invalid-feedback">
                      Por favor, ingrese el apellido materno.
                    </div>
                  </div>
                </div>
                <div class="row d-flex justify-content-start">
                  <div class="col-md-4 mt-3">
                    <label for="correoInput">Correo</label>
                    <input [disabled]="loading" [(ngModel)]="colaborador.correo" type="text" name="correoInput" id="correoInput" class="form-control" placeholder="Escriba el correo del colaborador">
                  </div>
                  <div class="col-md-4 mt-3">
                    <label for="telefonoInput">Teléfono</label>
                    <input [disabled]="loading" [(ngModel)]="colaborador.telefono" type="number" name="telefonoInput" id="telefonoInput" class="form-control" placeholder="Escriba el teléfono del colaborador">
                  </div>
                </div>
                <div class="row d-flex justify-content-start">
                  <div class="col-md-4 mt-3">
                    <label for="uens" class="form-label">UEN</label>
                    <input [disabled]="loading" #uenSelect class="form-control" list="datalistOptions" (change)="uenChanged(uenSelect.value)" id="uens" placeholder="Selecciona una UEN...">
                    <div class="invalid-feedback">
                      Por favor, elija una UEN.
                    </div>
                    <datalist id="datalistOptions">
                      <option *ngFor="let uen of uens" value = {{uen.uen}}></option>
                    </datalist>
                  </div>
                  <div class="col-md-4 mt-3">
                    <label for="departamento" class="form-label">Departamento</label>
                    <input [disabled]="loading" #deptoSelect class="form-control" list="datalistDepto" (change)="deptoChanged(deptoSelect.value)" id="departamentos" placeholder="Selecciona un departamento...">
                    <div class="invalid-feedback">
                      Por favor, elija un departamento.
                    </div>
                    <datalist id="datalistDepto">
                      <option *ngFor="let depto of departamentos" value = {{depto.depto}}></option>
                    </datalist>
                  </div>
                  <div class="col-md-4 mt-3">
                    <label for="puesto" class="form-label">Puesto</label>
                    <input [disabled]="loading" #puestoSelect class="form-control" list="datalistPuestos" (change)="puestoChanged(puestoSelect.value)" id="puestos" placeholder="Selecciona un puesto...">
                    <div class="invalid-feedback">
                      Por favor, elija un puesto.
                    </div>
                    <datalist id="datalistPuestos">
                      <option *ngFor="let puesto of puestos" value = {{puesto.puesto}}></option>
                    </datalist>
                  </div>
                </div>
                <div class="row d-flex justify-content-center">
                  <div [hidden]="!loading" class="lds-facebook"><div></div><div></div><div></div></div>
                </div>
                <div class="row d-flex justify-content-center">
                  <div class="col-md-4">
                    <button [disabled]="loading" (click)="registrarColab()" class="mt-4 form-control btn
                    btn-success">Registrar colaborador<i class="far fa-save ml-2"></i></button>
                  </div>
                </div>
                <div class="row d-flex justify-content-center mt-4">
                  <div class="col-md-12 table-responsive">
                    <table id="tablaColabs" class="table table-striped table-bordered table-sm row-border hover" datatable [dtTrigger]="dtTrigger" [dtOptions]="dtOptions">
                      <thead>
                        <tr>
                          <th>Id</th>
                          <th>Nombre</th>
                          <th>Teléfono</th>
                          <th>Correo</th>
                          <th>UEN</th>
                          <th>Puesto</th>
                          <th>Departamento</th>
                          <th>Editar</th>
                        </tr>
                      </thead>
                      <tbody>
                       <tr *ngFor="let colaborador of colaboradores">
                          <td>{{colaborador.idempleado}}</td>
                          <td>{{colaborador.nombre}}</td>
                          <td>{{colaborador.telefono}}</td>
                          <td>{{colaborador.correo}}</td>
                          <td>{{colaborador.uen}}</td>
                          <td>{{colaborador.puesto}}</td>
                          <td>{{colaborador.departamento}}</td>
                          <td class="text-center">
                          <button style="height:auto;" (click)="editColab(colaborador)" type="button" class="ml-2 mt-2 btn btn-primary"> <i class="fas fa-edit"></i> </button>
                          <button style="height:auto;" (click)="eliminaColab(colaborador.idempleado)" type="button" class="ml-2 mt-2 btn btn-danger"> <i class="fas fa-user-alt-slash"></i> </button>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-------------------------------------------------------------------------------------------------------------------->
          <div class="accordion-item">
            <h2 class="accordion-header" id="panelsStayOpen-headingTwo">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo" aria-expanded="false" aria-controls="panelsStayOpen-collapseTwo">
                Registro de equipos
              </button>
            </h2>
            <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingTwo">
              <div class="accordion-body">
<!--                 <div class="row d-flex justify-content-between">
                  <div class="col-md-4 mt-3">
                    <label for="modeloInput">Modelo</label>
                    <input [disabled]="loadingE" [(ngModel)]="equipo.equipo" (keyup)="checkFormE()" type="text" name="modelo" id="modeloInput" class="form-control" placeholder="Ingrese el modelo del equipo">
                    <div class="invalid-feedback">
                      Por favor, ingrese el modelo del equipo.
                    </div>
                  </div>
                  <div class="col-md-4 mt-3">
                    <label for="propiedadInput">Propiedad</label>
                    <select [disabled]="loadingE" [(ngModel)]="equipo.propiedad" (change)="checkFormE()" id="propiedadInput" class="form-select" aria-label="Default select example">
                      <option selected disabled value = null>Seleccione una opción...</option>
                      <option value = "PROPIO">PROPIO</option>
                      <option value = "ARRENDADO">ARRENDADO</option>
                    </select>
                    <div class="invalid-feedback">
                      Por favor, seleccione una opción
                    </div>
                  </div>
                  <div class="col-md-4 mt-3">
                    <label for="apellidoMat">Número de serie</label>
                    <input [disabled]="loadingE" [(ngModel)]="equipo.no_serie" type="text" name="noSerie" id="noSerieInput" class="form-control" placeholder="Escriba el número de serie del equipo">
                  </div>
                </div>
                <div class="row d-flex flex justify-content-center">
                  <div class="col-md-4 mt-3">
                    <label for="tipoEquipo" class="form-label">Tipo de equipo</label>
                    <input [disabled]="loadingE" #tipoEquipoInput class="form-control" list="datalistTipoEq" (change)="tipoEqChanged(tipoEquipoInput.value)" id="tipoEquipoInput" placeholder="Selecciona un tipo de equipo...">
                    <div class="invalid-feedback">
                      Por favor, elija un tipo de equipo.
                    </div>
                    <datalist id="datalistTipoEq">
                      <option *ngFor="let tipoeq of tipos" value = {{tipoeq.tipo_equipo}}></option>
                    </datalist>
                  </div>
                  <div class="col-md-4 mt-3">
                    <label for="marcaEquipo" class="form-label">Marca</label>
                    <input [disabled]="loadingE" #marcaEquipoInput class="form-control" list="datalistMarcaEq" (change)="marcaEqChanged(marcaEquipoInput.value)" id="marcaEquipoInput" placeholder="Selecciona una marca...">
                    <div class="invalid-feedback">
                      Por favor, elija una marca.
                    </div>
                    <datalist id="datalistMarcaEq">
                      <option *ngFor="let marca of marcas" value = {{marca.marca}}></option>
                    </datalist>
                  </div>
                </div>
                <div class="row d-flex justify-content-center">
                  <div [hidden]="!loadingE" class="lds-facebook"><div></div><div></div><div></div></div>
                </div>
                <div class="row d-flex justify-content-center">
                  <div class="col-md-4">
                    <button [disabled]="loadingE" (click)="registrarEquipo()" class="mt-4 form-control btn
                    btn-success">Registrar equipo<i class="far fa-save ml-2"></i></button>
                  </div>
                </div> -->
              </div>
            </div>
          </div>
          <div class="accordion-item">
            <h2 class="accordion-header" id="panelsStayOpen-headingThree">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseThree" aria-expanded="false" aria-controls="panelsStayOpen-collapseThree">
                Asignar equipos a colaborador
              </button>
            </h2>
            <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingThree">
              <div class="accordion-body">
                <div class="row">

                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-----------------------------------------MODAL MULTIUSOS------------------------------------------>
<div class="modal fade" id="advertenciaModal" tabindex="-1"
  aria-labelledby="advertenciaModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-md">
    <div class="modal-content">
      <div class="modal-header bg-dark text-light">
        <h5 id="headerModal" class="modal-title"></h5>
      </div>
      <div class="modal-body">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <div id="alertModal" class="alert" role="alert">
                <p id="modalText"></p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>

<!-----------------------------------------MODAL DE CONFIRMAR ELIMINACIÓN DE COLABORADOR------------------------------------------>
<div class="modal fade" id="eliminaColabModal" tabindex="-1"
  aria-labelledby="eliminaColabModalLabel" data-bs-backdrop="static" aria-hidden="true">
  <div class="modal-dialog modal-md">
    <div class="modal-content">
      <div class="modal-header bg-dark text-light">
        <h5 class="modal-title">Confirmación</h5>
      </div>
      <div class="modal-body">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <div class="alert alert-warning" role="alert" [style]="{'font-size': 'large', 'font-weight': 'bolder'}">
                <p><i class="mr-2 far fa-question-circle"></i> ¿Está seguro que quiere deshabilitar al colaborador?</p>
              </div>
            </div>
          </div>
          <div class="row d-flex justify-content-center">
            <div class="col-3">
              <div class="btn-group" role="group" ngbRadioGroup name="radioBasic" [(ngModel)]="eliminaColaborador">
                <label ngbButtonLabel class="btn btn-outline-primary">
                  <input ngbButton type="radio" class="btn-check" [value]=1> Si
                </label>
                <label ngbButtonLabel class="btn btn-outline-primary">
                  <input ngbButton type="radio" class="btn-check" [value]=2> No
                </label>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" (click)="eliminarColaborador()">Continuar</button>
      </div>
    </div>
  </div>
</div>

<!-----------------------------------------MODAL EDICIÓN COLABORADORES------------------------------------------>
<div class="modal fade" id="editColabModal" tabindex="-1"
  aria-labelledby="editColabModalLabel" data-bs-backdrop="static" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header bg-dark text-light">
        <h5 class="modal-title">Editar el colaborador {{colabEditing.idempleado}}</h5>
      </div>
      <div class="modal-body">
        <div class="container">
          <div class="row d-flex justify-content-between">
            <div class="col-md-4 mt-3">
              <label for="nombresInput">Nombre(s)</label>
              <input [disabled]="loadingEC" [(ngModel)]="colabEditing.nombres" (keyup)="checkFormEC()" type="text" name="nombres" id="nombresInputEC" class="form-control" placeholder="Escriba el nombre(s) del colaborador">
              <div class="invalid-feedback">
                Por favor, ingrese un nombre.
              </div>
            </div>
            <div class="col-md-4 mt-3">
              <label for="apellidoPat">Apellido paterno</label>
              <input [disabled]="loadingEC" [(ngModel)]="colabEditing.apellido_p" (keyup)="checkFormEC()" type="text" name="apellidoPaterno" id="apellidoPatEC" class="form-control" placeholder="Escriba el apellido paterno del colaborador">
              <div class="invalid-feedback">
                Por favor, ingrese el apellido paterno.
              </div>
            </div>
            <div class="col-md-4 mt-3">
              <label for="apellidoMat">Apellido materno</label>
              <input [disabled]="loadingEC" [(ngModel)]="colabEditing.apellido_m" (keyup)="checkFormEC()" type="text" name="apellidoMaterno" id="apellidoMatEC" class="form-control" placeholder="Escriba el apellido materno del colaborador">
              <div class="invalid-feedback">
                Por favor, ingrese el apellido materno.
              </div>
            </div>
          </div>
          <div class="row d-flex justify-content-start">
            <div class="col-md-4 mt-3">
              <label for="correoInput">Correo</label>
              <input [disabled]="loadingEC" [(ngModel)]="colabEditing.correo" type="text" name="correoInput" id="correoInputEC" class="form-control" placeholder="Escriba el correo del colaborador">
            </div>
            <div class="col-md-4 mt-3">
              <label for="telefonoInput">Teléfono</label>
              <input [disabled]="loadingEC" [(ngModel)]="colabEditing.telefono" type="number" name="telefonoInput" id="telefonoInputEC" class="form-control" placeholder="Escriba el teléfono del colaborador">
            </div>
          </div>
          <div class="row d-flex justify-content-start">
            <div class="col-md-4 mt-3">
              <label for="uens" class="form-label">UEN</label>
              <input [disabled]="loadingEC" [(ngModel)]="colabEditingUEN" #uenSelectEC class="form-control" list="datalistOptionsEC" (change)="uenChangedEC(uenSelectEC.value)" id="uensEC" placeholder="Selecciona una UEN...">
              <div class="invalid-feedback">
                Por favor, elija una UEN.
              </div>
              <datalist id="datalistOptionsEC">
                <option *ngFor="let uen of uens" value = {{uen.uen}}></option>
              </datalist>
            </div>
            <div class="col-md-4 mt-3">
              <label for="departamento" class="form-label">Departamento</label>
              <input [disabled]="loadingEC" [(ngModel)]="colabEditingDepto" #deptoSelectEC class="form-control" list="datalistDeptoEC" (change)="deptoChangedEC(deptoSelectEC.value)" id="departamentosEC" placeholder="Selecciona un departamento...">
              <div class="invalid-feedback">
                Por favor, elija un departamento.
              </div>
              <datalist id="datalistDeptoEC">
                <option *ngFor="let depto of departamentos" value = {{depto.depto}}></option>
              </datalist>
            </div>
            <div class="col-md-4 mt-3">
              <label for="puesto" class="form-label">Puesto</label>
              <input [disabled]="loadingEC" [(ngModel)]="colabEditingPuesto" #puestoSelectEC class="form-control" list="datalistPuestosEC" (change)="puestoChangedEC(puestoSelectEC.value)" id="puestosEC" placeholder="Selecciona un puesto...">
              <div class="invalid-feedback">
                Por favor, elija un puesto.
              </div>
              <datalist id="datalistPuestosEC">
                <option *ngFor="let puesto of puestos" value = {{puesto.puesto}}></option>
              </datalist>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button [disabled]="loadingEC" (click)="guardarCambiosEC()" type="button" class="btn btn-success">Guardar cambios</button>
        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>
